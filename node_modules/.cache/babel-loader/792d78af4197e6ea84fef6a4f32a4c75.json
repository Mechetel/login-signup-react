{"ast":null,"code":"import _objectSpread from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/dmitryhoma/Projects/login-signup-react/src/App.js\";\nimport React, { Component } from \"react\";\nimport { Switch, Route, Redirect, withRouter } from \"react-router-dom\";\nimport Login from \"./components/Login\";\nimport Home from \"./components/Home\";\nimport Signup from \"./components/Signup\";\nimport NotFound from \"./components/NotFound\";\nimport Navbar from \"./components/Navbar\";\nimport UpdateDetails from \"./components/UpdateDetails\";\n\nvar jsonfile = require('jsonfile');\n\nvar inputErrorsCount = 0;\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      users: [],\n      userError: \"\",\n      disableElement: false\n    };\n\n    _this.addUser = function (user) {\n      var users = JSON.parse(localStorage.getItem(\"users\")) || [];\n      users.push(_objectSpread({}, user, {\n        id: users.length || 0\n      }));\n      localStorage.setItem(\"users\", JSON.stringify(users));\n      var file = '../data/users.json';\n      jsonfile.writeFile(file, JSON.stringify({\n        name: \"hello\"\n      }), function (err) {\n        if (err) console.error(err);\n      });\n\n      _this.props.history.replace(\"/login\");\n    };\n\n    _this.checkUser = function (user) {\n      var users = JSON.parse(localStorage.getItem(\"users\")) || [];\n      var u = users.filter(function (us) {\n        return us.email === user.email && us.password === user.password;\n      });\n\n      if (u.length) {\n        localStorage.setItem(\"user\", JSON.stringify(u[0]));\n\n        _this.setState({\n          userError: \"\"\n        });\n\n        _this.props.history.push(\"/home\");\n\n        inputErrorsCount = 0;\n      } else {\n        inputErrorsCount += 1;\n\n        if (inputErrorsCount > 2) {\n          _this.setState({\n            disableElement: true\n          });\n        }\n\n        console.log(inputErrorsCount);\n\n        _this.setState({\n          userError: \"The email or password is incorrect.\"\n        }, function () {\n          setTimeout(function () {\n            return _this.setState({\n              userError: \"\"\n            });\n          }, 5000);\n        });\n      }\n    };\n\n    _this.setError = function () {\n      _this.setState({\n        userError: \"\"\n      });\n    };\n\n    _this.handleLog = function () {\n      var user = localStorage.getItem(\"user\");\n\n      if (user) {\n        localStorage.removeItem(\"user\");\n      }\n\n      _this.props.history.replace(\"/login\");\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n        handleLog: this.handleLog,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container my-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        path: \"/login\",\n        render: function render() {\n          return /*#__PURE__*/React.createElement(Login, {\n            checkUser: _this2.checkUser,\n            userError: _this2.state.userError,\n            disableElement: _this2.state.disableElement,\n            setError: _this2.setError,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/signup\",\n        render: function render() {\n          return /*#__PURE__*/React.createElement(Signup, {\n            addUser: _this2.addUser,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/home\",\n        component: Home,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/update-details\",\n        component: UpdateDetails,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/not-found\",\n        component: NotFound,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Redirect, {\n        from: \"/\",\n        exact: true,\n        to: \"login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/not-found\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/dmitryhoma/Projects/login-signup-react/src/App.js"],"names":["React","Component","Switch","Route","Redirect","withRouter","Login","Home","Signup","NotFound","Navbar","UpdateDetails","jsonfile","require","inputErrorsCount","App","state","users","userError","disableElement","addUser","user","JSON","parse","localStorage","getItem","push","id","length","setItem","stringify","file","writeFile","name","err","console","error","props","history","replace","checkUser","u","filter","us","email","password","setState","log","setTimeout","setError","handleLog","removeItem"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Switch, Route, Redirect, withRouter } from \"react-router-dom\";\nimport Login from \"./components/Login\";\nimport Home from \"./components/Home\";\nimport Signup from \"./components/Signup\";\nimport NotFound from \"./components/NotFound\";\nimport Navbar from \"./components/Navbar\";\nimport UpdateDetails from \"./components/UpdateDetails\";\n\nconst jsonfile = require('jsonfile');\nlet inputErrorsCount = 0;\n\nclass App extends Component {\n  state = {\n    users: [],\n    userError: \"\",\n    disableElement: false\n  };\n\n  addUser = user => {\n    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\n    users.push({ ...user, id: users.length || 0 });\n    localStorage.setItem(\"users\", JSON.stringify(users));\n\n    const file = '../data/users.json'\n    jsonfile.writeFile(file, JSON.stringify({name: \"hello\"}), (err) => {\n      if (err) console.error(err)\n    })\n    this.props.history.replace(\"/login\");\n  };\n\n  checkUser = user => {\n    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\n    const u = users.filter(\n      us => us.email === user.email && us.password === user.password\n    );\n    if (u.length) {\n      localStorage.setItem(\"user\", JSON.stringify(u[0]));\n      this.setState({ userError: \"\" });\n      this.props.history.push(\"/home\");\n      inputErrorsCount = 0;\n    } else {\n      inputErrorsCount += 1;\n      if (inputErrorsCount > 2) {\n        this.setState({ disableElement:true });\n      }\n      console.log(inputErrorsCount);\n      this.setState(\n        { userError: \"The email or password is incorrect.\" },\n        () => {\n          setTimeout(() => this.setState({ userError: \"\" }), 5000);\n        }\n      );\n    }\n  };\n\n  setError = () => {\n    this.setState({ userError: \"\" });\n  };\n\n  handleLog = () => {\n    const user = localStorage.getItem(\"user\");\n    if (user) {\n      localStorage.removeItem(\"user\");\n    }\n    this.props.history.replace(\"/login\");\n  };\n\n  render() {\n    return (\n      <>\n        <Navbar handleLog={this.handleLog} />\n        <div className=\"container my-3\">\n          <Switch>\n            <Route\n              path=\"/login\"\n              render={() => (\n                <Login\n                  checkUser={this.checkUser}\n                  userError={this.state.userError}\n                  disableElement={this.state.disableElement}\n                  setError={this.setError}\n                />\n              )}\n            />\n            <Route\n              path=\"/signup\"\n              render={() => <Signup addUser={this.addUser} />}\n            />\n            <Route path=\"/home\" component={Home} />\n            <Route\n              path=\"/update-details\"\n              component={UpdateDetails}\n            />\n            <Route path=\"/not-found\" component={NotFound} />\n            <Redirect from=\"/\" exact to=\"login\" />\n            <Redirect to=\"/not-found\" />\n          </Switch>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}