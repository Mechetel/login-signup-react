{"ast":null,"code":"import _objectSpread from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/dmitryhoma/Projects/login-signup-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/dmitryhoma/Projects/login-signup-react/src/App.js\";\nimport React, { Component } from \"react\";\nimport { Switch, Route, Redirect, withRouter } from \"react-router-dom\";\nimport Login from \"./components/Login\";\nimport Home from \"./components/Home\";\nimport Signup from \"./components/Signup\";\nimport NotFound from \"./components/NotFound\";\nimport Navbar from \"./components/Navbar\";\nimport UpdateDetails from \"./components/UpdateDetails\";\n\nvar password = require(\"secure-random-password\");\n\nvar inputErrorsCount = 0;\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      users: [],\n      userError: \"\",\n      disableElement: false\n    };\n\n    _this.addUser = function (user) {\n      var users = JSON.parse(localStorage.getItem(\"users\")) || [];\n      users.push(_objectSpread({}, user, {\n        id: users.length || 0\n      }));\n      localStorage.setItem(\"users\", JSON.stringify(users));\n\n      _this.props.history.replace(\"/login\");\n    };\n\n    _this.checkUser = function (user) {\n      var users = JSON.parse(localStorage.getItem(\"users\")) || [];\n      var u = users.filter(function (us) {\n        return us.email === user.email && us.password === user.password;\n      });\n\n      if (u.length) {\n        localStorage.setItem(\"user\", JSON.stringify(u[0]));\n\n        _this.setState({\n          userError: \"\"\n        });\n\n        _this.props.history.push(\"/home\");\n\n        inputErrorsCount = 0;\n      } else {\n        inputErrorsCount += 1;\n\n        if (inputErrorsCount > 2) {\n          _this.setState({\n            disableElement: true\n          });\n        }\n\n        console.log(inputErrorsCount);\n\n        _this.setState({\n          userError: \"The email or password is incorrect.\"\n        }, function () {\n          setTimeout(function () {\n            return _this.setState({\n              userError: \"\"\n            });\n          }, 5000);\n        });\n      }\n    };\n\n    _this.setError = function () {\n      _this.setState({\n        userError: \"\"\n      });\n    };\n\n    _this.handleLog = function () {\n      var user = localStorage.getItem(\"user\");\n\n      if (user) {\n        localStorage.removeItem(\"user\");\n      }\n\n      _this.props.history.replace(\"/login\");\n    };\n\n    _this.handleGenerate = function (e) {\n      e.preventDefault();\n      var final_password = password.randomPassword({\n        characters: [{\n          characters: password.upper,\n          exactly: 2\n        }, {\n          characters: password.digits,\n          exactly: 2\n        }, {\n          characters: \"!@#$%^&*\",\n          exactly: 2\n        }, password.lower]\n      });\n\n      _this.setState({\n        user: {\n          password: final_password,\n          confirmPassword: final_password\n        }\n      });\n    };\n\n    _this.validateProperty = function (name, value) {\n      var _this$state = _this.state,\n          errors = _this$state.errors,\n          user = _this$state.user; // eslint-disable-next-line\n\n      switch (name) {\n        case \"firstName\":\n        case \"lastName\":\n          {\n            var regex = /^[a-z ,.'-]+$/i;\n            user[name] = value;\n            var nameUser = name === \"firstName\" ? \"First Name\" : \"Last Name\";\n\n            if (value === \"\") {\n              errors[name] = \"Please enter your \".concat(nameUser);\n            } else if (value.trim().length < 2) {\n              errors[name] = \"\".concat(nameUser, \" must be at least 2 characters long.\");\n            } else if (regex.test(value.trim())) {\n              delete errors[name];\n            } else {\n              errors[name] = \"\".concat(nameUser, \" contains alphanumeric charaters or ,.'- only\");\n            }\n\n            break;\n          }\n\n        case \"dob\":\n          {\n            user[name] = value;\n            var date = new Date();\n            var month = String(date.getMonth() + 1).padStart(2, \"0\");\n            var day = String(date.getDate()).padStart(2, \"0\");\n            var year = String(date.getFullYear());\n            var dateValue = value.split(\"-\");\n\n            if (+dateValue[0] > +year || +dateValue[0] === +year && +dateValue[1] > +month || +dateValue[0] === +year && +dateValue[1] === +month && +dateValue[2] > +day) {\n              errors[\"dob\"] = \"Date of birth should be less than current date\";\n            } else {\n              delete errors[\"dob\"];\n            }\n\n            break;\n          }\n\n        case \"gender\":\n          {\n            user[name] = value;\n\n            if (value === \"\") {\n              errors[\"gender\"] = \"Please select your gender\";\n            } else {\n              delete errors[\"gender\"];\n            }\n\n            break;\n          }\n\n        case \"phone\":\n          {\n            if (value === \"\") {\n              errors[\"phone\"] = \"Please enter your contact number.\";\n              user[name] = value;\n            } else {\n              var _regex = /^[0-9]+$/g;\n\n              if (_regex.test(value)) {\n                user[name] = value;\n\n                if (value.length !== 10) {\n                  errors[\"phone\"] = \"Phone number length should be 10 characters.\";\n                } else {\n                  delete errors[\"phone\"];\n                }\n              }\n            }\n\n            break;\n          }\n\n        case \"email\":\n          {\n            user[name] = value; // eslint-disable-next-line\n\n            var _regex2 = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n            if (_regex2.test(value.trim())) {\n              var users = JSON.parse(localStorage.getItem(\"users\")) || [];\n              var comp = users.filter(function (obj) {\n                return obj.email === value;\n              });\n\n              if (comp.length) {\n                errors[name] = \"Email already registered.\";\n              } else {\n                delete errors[name];\n              }\n            } else {\n              errors[name] = \"Please enter a valid email address.\";\n            }\n\n            break;\n          }\n\n        case \"password\":\n          {\n            var testPassword = function testPassword(pass) {\n              var allRigthCharacters = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!@#$%^&*\";\n\n              for (var i = 0; i < pass.length; i++) {\n                if (allRigthCharacters.includes(pass[i])) {\n                  continue;\n                } else {\n                  return false;\n                }\n              }\n\n              return true;\n            };\n\n            user[name] = value;\n            var _regex3 = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,15})/;\n\n            if (_regex3.test(value.trim()) && testPassword(value.trim())) {\n              delete errors[name];\n            } else {\n              errors[name] = \"Error with password. Must comply with the regulations\";\n            }\n\n            break;\n          }\n\n        case \"confirmPassword\":\n          {\n            user[name] = value;\n\n            if (!(user[\"password\"] === value)) {\n              errors[name] = \"Passwords didn't match. Try again.\";\n            } else if (!value.trim()) {\n              errors[name] = \"Confirm Password can't be empty.\";\n            } else {\n              delete errors[name];\n            }\n\n            break;\n          }\n      }\n\n      _this.setState({\n        user: user,\n        errors: errors\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n        handleLog: this.handleLog,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container my-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        path: \"/login\",\n        render: function render() {\n          return /*#__PURE__*/React.createElement(Login, {\n            checkUser: _this2.checkUser,\n            userError: _this2.state.userError,\n            disableElement: _this2.state.disableElement,\n            setError: _this2.setError,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 17\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/signup\",\n        render: function render() {\n          return /*#__PURE__*/React.createElement(Signup, {\n            addUser: _this2.addUser,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 29\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/home\",\n        component: Home,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/update-details\",\n        component: UpdateDetails,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        path: \"/not-found\",\n        component: NotFound,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Redirect, {\n        from: \"/\",\n        exact: true,\n        to: \"login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/not-found\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/dmitryhoma/Projects/login-signup-react/src/App.js"],"names":["React","Component","Switch","Route","Redirect","withRouter","Login","Home","Signup","NotFound","Navbar","UpdateDetails","password","require","inputErrorsCount","App","state","users","userError","disableElement","addUser","user","JSON","parse","localStorage","getItem","push","id","length","setItem","stringify","props","history","replace","checkUser","u","filter","us","email","setState","console","log","setTimeout","setError","handleLog","removeItem","handleGenerate","e","preventDefault","final_password","randomPassword","characters","upper","exactly","digits","lower","confirmPassword","validateProperty","name","value","errors","regex","nameUser","trim","test","date","Date","month","String","getMonth","padStart","day","getDate","year","getFullYear","dateValue","split","comp","obj","testPassword","pass","allRigthCharacters","i","includes"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Switch, Route, Redirect, withRouter } from \"react-router-dom\";\nimport Login from \"./components/Login\";\nimport Home from \"./components/Home\";\nimport Signup from \"./components/Signup\";\nimport NotFound from \"./components/NotFound\";\nimport Navbar from \"./components/Navbar\";\nimport UpdateDetails from \"./components/UpdateDetails\";\n\nconst password = require(\"secure-random-password\");\nlet inputErrorsCount = 0;\n\nclass App extends Component {\n  state = {\n    users: [],\n    userError: \"\",\n    disableElement: false,\n  };\n\n  addUser = (user) => {\n    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\n    users.push({ ...user, id: users.length || 0 });\n    localStorage.setItem(\"users\", JSON.stringify(users));\n    this.props.history.replace(\"/login\");\n  };\n\n  checkUser = (user) => {\n    const users = JSON.parse(localStorage.getItem(\"users\")) || [];\n    const u = users.filter(\n      (us) => us.email === user.email && us.password === user.password\n    );\n    if (u.length) {\n      localStorage.setItem(\"user\", JSON.stringify(u[0]));\n      this.setState({ userError: \"\" });\n      this.props.history.push(\"/home\");\n      inputErrorsCount = 0;\n    } else {\n      inputErrorsCount += 1;\n      if (inputErrorsCount > 2) {\n        this.setState({ disableElement: true });\n      }\n      console.log(inputErrorsCount);\n      this.setState(\n        { userError: \"The email or password is incorrect.\" },\n        () => {\n          setTimeout(() => this.setState({ userError: \"\" }), 5000);\n        }\n      );\n    }\n  };\n\n  setError = () => {\n    this.setState({ userError: \"\" });\n  };\n\n  handleLog = () => {\n    const user = localStorage.getItem(\"user\");\n    if (user) {\n      localStorage.removeItem(\"user\");\n    }\n    this.props.history.replace(\"/login\");\n  };\n\n\n  handleGenerate = (e) => {\n    e.preventDefault();\n    const final_password = password.randomPassword({\n      characters: [\n        { characters: password.upper, exactly: 2 },\n        { characters: password.digits, exactly: 2 },\n        { characters: \"!@#$%^&*\", exactly: 2 },\n        password.lower,\n      ],\n    });\n    this.setState({\n      user: {\n        password: final_password,\n        confirmPassword: final_password,\n      },\n    });\n  };\n\n  validateProperty = (name, value) => {\n    const { errors, user } = this.state;\n    // eslint-disable-next-line\n    switch (name) {\n      case \"firstName\":\n      case \"lastName\": {\n        let regex = /^[a-z ,.'-]+$/i;\n        user[name] = value;\n        const nameUser = name === \"firstName\" ? \"First Name\" : \"Last Name\";\n        if (value === \"\") {\n          errors[name] = `Please enter your ${nameUser}`;\n        } else if (value.trim().length < 2) {\n          errors[name] = `${nameUser} must be at least 2 characters long.`;\n        } else if (regex.test(value.trim())) {\n          delete errors[name];\n        } else {\n          errors[\n            name\n          ] = `${nameUser} contains alphanumeric charaters or ,.'- only`;\n        }\n        break;\n      }\n\n      case \"dob\": {\n        user[name] = value;\n        const date = new Date();\n        const month = String(date.getMonth() + 1).padStart(2, \"0\");\n        const day = String(date.getDate()).padStart(2, \"0\");\n        const year = String(date.getFullYear());\n        const dateValue = value.split(\"-\");\n        if (\n          +dateValue[0] > +year ||\n          (+dateValue[0] === +year && +dateValue[1] > +month) ||\n          (+dateValue[0] === +year &&\n            +dateValue[1] === +month &&\n            +dateValue[2] > +day)\n        ) {\n          errors[\"dob\"] = \"Date of birth should be less than current date\";\n        } else {\n          delete errors[\"dob\"];\n        }\n        break;\n      }\n\n      case \"gender\": {\n        user[name] = value;\n        if (value === \"\") {\n          errors[\"gender\"] = \"Please select your gender\";\n        } else {\n          delete errors[\"gender\"];\n        }\n        break;\n      }\n\n      case \"phone\": {\n        if (value === \"\") {\n          errors[\"phone\"] = \"Please enter your contact number.\";\n          user[name] = value;\n        } else {\n          const regex = /^[0-9]+$/g;\n          if (regex.test(value)) {\n            user[name] = value;\n            if (value.length !== 10) {\n              errors[\"phone\"] = \"Phone number length should be 10 characters.\";\n            } else {\n              delete errors[\"phone\"];\n            }\n          }\n        }\n        break;\n      }\n\n      case \"email\": {\n        user[name] = value;\n        // eslint-disable-next-line\n        const regex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        if (regex.test(value.trim())) {\n          const users = JSON.parse(localStorage.getItem(\"users\")) || [];\n          const comp = users.filter((obj) => obj.email === value);\n          if (comp.length) {\n            errors[name] = \"Email already registered.\";\n          } else {\n            delete errors[name];\n          }\n        } else {\n          errors[name] = \"Please enter a valid email address.\";\n        }\n        break;\n      }\n\n      case \"password\": {\n        user[name] = value;\n        function testPassword(pass) {\n          let allRigthCharacters =\n            \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!@#$%^&*\";\n          for (let i = 0; i < pass.length; i++) {\n            if (allRigthCharacters.includes(pass[i])) {\n              continue;\n            } else {\n              return false;\n            }\n          }\n          return true;\n        }\n        const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,15})/;\n        if (regex.test(value.trim()) && testPassword(value.trim())) {\n          delete errors[name];\n        } else {\n          errors[name] =\n            \"Error with password. Must comply with the regulations\";\n        }\n        break;\n      }\n\n      case \"confirmPassword\": {\n        user[name] = value;\n        if (!(user[\"password\"] === value)) {\n          errors[name] = \"Passwords didn't match. Try again.\";\n        } else if (!value.trim()) {\n          errors[name] = \"Confirm Password can't be empty.\";\n        } else {\n          delete errors[name];\n        }\n        break;\n      }\n    }\n    this.setState({ user, errors });\n  };\n\n  render() {\n    return (\n      <>\n        <Navbar handleLog={this.handleLog} />\n        <div className=\"container my-3\">\n          <Switch>\n            <Route\n              path=\"/login\"\n              render={() => (\n                <Login\n                  checkUser={this.checkUser}\n                  userError={this.state.userError}\n                  disableElement={this.state.disableElement}\n                  setError={this.setError}\n                />\n              )}\n            />\n            <Route\n              path=\"/signup\"\n              render={() => <Signup addUser={this.addUser} />}\n            />\n            <Route path=\"/home\" component={Home} />\n            <Route path=\"/update-details\" component={UpdateDetails} />\n            <Route path=\"/not-found\" component={NotFound} />\n            <Redirect from=\"/\" exact to=\"login\" />\n            <Redirect to=\"/not-found\" />\n          </Switch>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}